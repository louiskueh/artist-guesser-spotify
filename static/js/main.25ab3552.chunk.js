(this["webpackJsonpartist-guesser-spotify"]=this["webpackJsonpartist-guesser-spotify"]||[]).push([[0],{103:function(t,e,a){},121:function(t,e,a){},123:function(t,e,a){"use strict";a.r(e);var n=a(1),i=a.n(n),s=a(14),r=a.n(s),l=(a(75),a(29)),o=a(19),c=a.n(o),u=a(7),m=a(37),p=(a(103),a(15)),h=a(10),g=a(13),d=a(17),f=a(16),y=a(62),b=a.n(y),v=a(63),N=(a(121),a(31)),S=(a(55),function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"back"},"Back Side",i.a.createElement(u.d,null,i.a.createElement(u.h,{hint:this.props.songName,className:"whiteText",label:"Song Name",disabled:!0,containerClass:"text-left",icon:"music",color:N.a}),i.a.createElement(u.h,{hint:this.props.artistName,className:"whiteText",label:"Artist Name",labelId:"artist",icon:"user",disabled:!0,containerClass:"text-left"}),i.a.createElement(u.h,{hint:""!==this.props.inputSongName?this.props.inputSongName:"NO SONG INPUTTED",className:"whiteText",label:"Your Song Guess "+this.props.songSimilarity+"% similar",labelId:"artist",icon:"music",disabled:!0,containerClass:"text-left"}),i.a.createElement(u.h,{hint:""!==this.props.inputArtistName?this.props.inputArtistName:"NO ARTIST INPUTTED",className:"whiteText",label:"Your Artist Guess "+this.props.artistSimilarity+"% similar",labelId:"artist",icon:"user",disabled:!0,containerClass:"text-left"})),i.a.createElement("button",{onClick:this.props.toggleFlip,className:"buttonClass"},"Back"))}}]),a}(n.Component)),k=a(64),E=a(138),O=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).state={songName:"",artistName:""},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n}return Object(g.a)(a,[{key:"handleChange",value:function(t){this.setState(Object(k.a)({},t.target.name,t.target.value)),console.log(t.target.name+" "+t.target.value)}},{key:"handleSubmit",value:function(t){this.props.toggleFlip(),this.props.setUserInput(this.state.songName,this.state.artistName)}},{key:"render",value:function(){return i.a.createElement(u.c,{className:"front"},i.a.createElement(u.e,{className:"img-fluid",src:this.props.item.album.images[0].url,waves:!0}),i.a.createElement(E.a,{variant:"determinate",value:100*this.props.progress_ms/this.props.item.duration_ms}),i.a.createElement(u.d,null,i.a.createElement(u.h,{name:"songName",value:this.state.songName,onChange:this.handleChange,className:"whiteText",label:"Guess the song!"}),i.a.createElement(u.h,{name:"artistName",value:this.state.artistName,onChange:this.handleChange,className:"whiteText",label:"Guess the artist!"}),i.a.createElement("button",{onClick:this.handleSubmit,className:"buttonClass"},"Check")))}}]),a}(n.Component),j=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).state={flipped:!1,songName:"",artistName:"",songSimilarity:0,artistSimilarity:0},n.toggleFlip=n.toggleFlip.bind(Object(h.a)(n)),n.setUserInput=n.setUserInput.bind(Object(h.a)(n)),n}return Object(g.a)(a,[{key:"toggleFlip",value:function(){console.log("flip"),this.setState({flipped:!this.state.flipped})}},{key:"setUserInput",value:function(t,e){this.setState({songName:t,artistName:e,songSimilarity:this.calculateSimilar(this.props.item.name,t),artistSimilarity:this.calculateSimilar(this.props.item.album.artists[0].name,e)})}},{key:"countLetters",value:function(t){var e,a={},n=Object(v.a)(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;a[i]=(a[i]||0)+1}}catch(s){n.e(s)}finally{n.f()}return a}},{key:"calculateSimilar",value:function(t,e){if(console.log("Inside clacualte similar"),void 0===t||void 0===e)return 0;var a=0,n=0;console.log("actual is "+t),console.log("input is "+e);var i=this.countLetters(t.toLowerCase()),s=this.countLetters(e.toLowerCase());console.log("dict is + "+t+" "+JSON.stringify(i)),console.log("inputDict is "+e+" "+JSON.stringify(s));for(var r=0,o=Object.entries(i);r<o.length;r++){var c=Object(l.a)(o[r],2),u=c[0],m=c[1];n+=u in s?Math.abs(m-s[u]):m,a+=m}return Math.round((a-n)/a*100)}},{key:"render",value:function(){return i.a.createElement(u.f,{style:{display:"flex",alignItems:"center",justifyContent:"center"}},i.a.createElement("div",{className:"card-container"+(this.state.flipped?" flipped":"")},i.a.createElement(O,{toggleFlip:this.toggleFlip,setUserInput:this.setUserInput,item:this.props.item,progress_ms:this.props.progress_ms}),i.a.createElement(S,{toggleFlip:this.toggleFlip,inputSongName:this.state.songName,inputArtistName:this.state.artistName,songName:this.props.item.name,artistName:this.props.item.album.artists[0].name,songSimilarity:this.state.songSimilarity,artistSimilarity:this.state.artistSimilarity})))}}]),a}(n.Component),C=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(){var t;return Object(p.a)(this,a),(t=e.call(this)).state={token:null,item:null,is_playing:!1,progress_ms:0},t.getCurrentlyPlaying=t.getCurrentlyPlaying.bind(Object(h.a)(t)),t.getSpotifyAPI=t.getSpotifyAPI.bind(Object(h.a)(t)),t}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.interval=setInterval((function(){return t.getCurrentlyPlaying(t.props.token)}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.getCurrentlyPlaying)}}]),Object(g.a)(a,[{key:"getSpotifyAPI",value:function(t){return b.a.create({baseURL:"https://api.spotify.com",headers:{Authorization:"Bearer "+t}})}},{key:"getCurrentlyPlaying",value:function(){var t=this;this.getSpotifyAPI(this.props.token).get("/v1/me/player/currently-playing").then((function(e){200===e.status?t.setState({item:e.data.item,is_playing:e.data.is_playing,progress_ms:e.data.progress_ms}):t.setState({item:null,is_playing:!1,progress_ms:0})})).catch((function(t){console.error(t.response)}))}},{key:"render",value:function(){return console.log("token is "+this.state.token),this.state.item?i.a.createElement(j,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.state.progress_ms}):i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"7rem"}},"Please play a song on Spotify")}}]),a}(i.a.Component),I=(a(122),function(){var t=Object(n.useState)(),e=Object(l.a)(t,2),a=e[0],s=e[1],r=c.a.get("spotifyAuthToken");console.log("authToken"+r),Object(n.useEffect)((function(){console.log("setting spotify auth token"),s(c.a.get("spotifyAuthToken"))}),[r]);return console.log(c.a.get("access_token")),i.a.createElement("div",null,i.a.createElement("div",{className:"spotifyHeading"},i.a.createElement("h1",null,"Spotify Guesser")),c.a.get("spotifyAuthToken")?i.a.createElement("div",null,i.a.createElement(C,{token:a})):i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"10rem"}},i.a.createElement(m.b,{redirectUri:"http://localhost:3000/play",clientID:"3770ed0bc8aa4ae6ba4dd47dec8b5fcd",scopes:[m.a.userReadCurrentlyPlaying]})),c.a.get("spotifyAuthToken")?i.a.createElement("div",{className:"logout"},i.a.createElement(u.b,{gradient:"aqua",onClick:function(){c.a.remove("spotifyAuthToken",{path:""}),window.location="/"}},"Logout")):"")});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},55:function(t,e,a){},70:function(t,e,a){t.exports=a(123)},75:function(t,e,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.25ab3552.chunk.js.map