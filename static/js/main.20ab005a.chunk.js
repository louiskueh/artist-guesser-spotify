(this["webpackJsonpartist-guesser-spotify"]=this["webpackJsonpartist-guesser-spotify"]||[]).push([[0],{106:function(e,t,a){},124:function(e,t,a){},126:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),s=a(17),r=a.n(s),l=(a(78),a(32)),o=a(29),c=a.n(o),u=a(8),m=a(40),p=(a(106),a(18)),h=a(13),g=a(16),d=a(20),f=a(19),y=a(65),b=a.n(y),v=a(66),N=(a(124),a(34)),S=(a(58),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"back"},"Back Side",i.a.createElement(u.d,null,i.a.createElement(u.h,{hint:this.props.songName,className:"whiteText",label:"Song Name",disabled:!0,containerClass:"text-left",icon:"music",color:N.a}),i.a.createElement(u.h,{hint:this.props.artistName,className:"whiteText",label:"Artist Name",labelId:"artist",icon:"user",disabled:!0,containerClass:"text-left"}),i.a.createElement(u.h,{hint:""!==this.props.inputSongName?this.props.inputSongName:"NO SONG INPUTTED",className:"whiteText",label:"Your Song Guess "+this.props.songSimilarity+"% similar",labelId:"artist",icon:"music",disabled:!0,containerClass:"text-left"}),i.a.createElement(u.h,{hint:""!==this.props.inputArtistName?this.props.inputArtistName:"NO ARTIST INPUTTED",className:"whiteText",label:"Your Artist Guess "+this.props.artistSimilarity+"% similar",labelId:"artist",icon:"user",disabled:!0,containerClass:"text-left"})),i.a.createElement("button",{onClick:this.props.toggleFlip,className:"buttonClass"},"Back"))}}]),a}(n.Component)),E=a(67),O=a(141),k=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={songName:"",artistName:""},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n}return Object(g.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(E.a)({},e.target.name,e.target.value)),console.log(e.target.name+" "+e.target.value)}},{key:"handleSubmit",value:function(e){this.props.toggleFlip(),this.props.setUserInput(this.state.songName,this.state.artistName)}},{key:"render",value:function(){return i.a.createElement(u.c,{className:"front"},i.a.createElement(u.e,{className:"img-fluid",src:this.props.item.album.images[0].url,waves:!0}),i.a.createElement(O.a,{variant:"determinate",value:100*this.props.progress_ms/this.props.item.duration_ms}),i.a.createElement(u.d,null,i.a.createElement(u.h,{name:"songName",value:this.state.songName,onChange:this.handleChange,className:"whiteText",label:"Guess the song!"}),i.a.createElement(u.h,{name:"artistName",value:this.state.artistName,onChange:this.handleChange,className:"whiteText",label:"Guess the artist!"}),i.a.createElement("button",{onClick:this.handleSubmit,className:"buttonClass"},"Check")))}}]),a}(n.Component),j=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={flipped:!1,songName:"",artistName:"",songSimilarity:0,artistSimilarity:0},n.toggleFlip=n.toggleFlip.bind(Object(h.a)(n)),n.setUserInput=n.setUserInput.bind(Object(h.a)(n)),n}return Object(g.a)(a,[{key:"toggleFlip",value:function(){console.log("flip"),this.setState({flipped:!this.state.flipped})}},{key:"setUserInput",value:function(e,t){this.setState({songName:e,artistName:t,songSimilarity:this.calculateSimilar(this.props.item.name,e),artistSimilarity:this.calculateSimilar(this.props.item.album.artists[0].name,t)})}},{key:"countLetters",value:function(e){var t,a={},n=Object(v.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;a[i]=(a[i]||0)+1}}catch(s){n.e(s)}finally{n.f()}return a}},{key:"calculateSimilar",value:function(e,t){if(console.log("Inside clacualte similar"),void 0===e||void 0===t)return 0;var a=0,n=0;console.log("actual is "+e),console.log("input is "+t);var i=this.countLetters(e.toLowerCase()),s=this.countLetters(t.toLowerCase());console.log("dict is + "+e+" "+JSON.stringify(i)),console.log("inputDict is "+t+" "+JSON.stringify(s));for(var r=0,o=Object.entries(i);r<o.length;r++){var c=Object(l.a)(o[r],2),u=c[0],m=c[1];n+=u in s?Math.abs(m-s[u]):m,a+=m}return Math.round((a-n)/a*100)}},{key:"render",value:function(){return i.a.createElement(u.f,{style:{display:"flex",alignItems:"center",justifyContent:"center"}},i.a.createElement("div",{className:"card-container"+(this.state.flipped?" flipped":"")},i.a.createElement(k,{toggleFlip:this.toggleFlip,setUserInput:this.setUserInput,item:this.props.item,progress_ms:this.props.progress_ms}),i.a.createElement(S,{toggleFlip:this.toggleFlip,inputSongName:this.state.songName,inputArtistName:this.state.artistName,songName:this.props.item.name,artistName:this.props.item.album.artists[0].name,songSimilarity:this.state.songSimilarity,artistSimilarity:this.state.artistSimilarity})))}}]),a}(n.Component),C=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={token:null,item:null,is_playing:!1,progress_ms:0},e.getCurrentlyPlaying=e.getCurrentlyPlaying.bind(Object(h.a)(e)),e.getSpotifyAPI=e.getSpotifyAPI.bind(Object(h.a)(e)),e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.getCurrentlyPlaying(e.props.token)}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.getCurrentlyPlaying)}}]),Object(g.a)(a,[{key:"getSpotifyAPI",value:function(e){return b.a.create({baseURL:"https://api.spotify.com",headers:{Authorization:"Bearer "+e}})}},{key:"getCurrentlyPlaying",value:function(){var e=this;this.getSpotifyAPI(this.props.token).get("/v1/me/player/currently-playing").then((function(t){200===t.status?e.setState({item:t.data.item,is_playing:t.data.is_playing,progress_ms:t.data.progress_ms}):e.setState({item:null,is_playing:!1,progress_ms:0})})).catch((function(e){console.error(e.response)}))}},{key:"render",value:function(){return this.state.item?i.a.createElement(j,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.state.progress_ms}):i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"7rem"}},"Please play a song on Spotify")}}]),a}(i.a.Component),I=(a(125),a(21)),w=a(6),T=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),a=t[0],s=t[1],r=c.a.get("spotifyAuthToken");Object(n.useEffect)((function(){s(c.a.get("spotifyAuthToken"))}),[r]);return i.a.createElement(I.a,null,i.a.createElement("div",{className:"spotifyHeading"},i.a.createElement("h1",null,"Spotify Guesser")),i.a.createElement(w.c,null,i.a.createElement(w.a,{exact:!0,path:"/artist-guesser-spotify"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"10rem"}},i.a.createElement(m.b,{redirectUri:"https://louiskueh.com/artist-guesser-spotify/play",clientID:"3770ed0bc8aa4ae6ba4dd47dec8b5fcd",scopes:[m.a.userReadCurrentlyPlaying]}))),i.a.createElement(w.a,{path:"/artist-guesser-spotify/play"},i.a.createElement("div",null,i.a.createElement(C,{token:a}),c.a.get("spotifyAuthToken")?i.a.createElement("div",{className:"logout"},i.a.createElement(u.b,{gradient:"aqua",onClick:function(){c.a.remove("spotifyAuthToken",{path:""}),window.location="/"}},"Logout")):""))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(I.a,null,i.a.createElement(i.a.StrictMode,null,i.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e,t,a){},73:function(e,t,a){e.exports=a(126)},78:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.20ab005a.chunk.js.map