(this["webpackJsonpartist-guesser-spotify"]=this["webpackJsonpartist-guesser-spotify"]||[]).push([[0],{102:function(e,t,a){},120:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var i=a(1),n=a.n(i),s=a(14),r=a.n(s),l=(a(74),a(28)),o=a(20),c=a.n(o),u=a(7),m=a(36),p=(a(102),a(15)),h=a(10),g=a(13),d=a(17),f=a(16),y=a(61),b=a.n(y),v=a(62),N=(a(120),a(30)),S=(a(54),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"back"},"Back Side",n.a.createElement(u.d,null,n.a.createElement(u.h,{hint:this.props.songName,className:"whiteText",label:"Song Name",disabled:!0,containerClass:"text-left",icon:"music",color:N.a}),n.a.createElement(u.h,{hint:this.props.artistName,className:"whiteText",label:"Artist Name",labelId:"artist",icon:"user",disabled:!0,containerClass:"text-left"}),n.a.createElement(u.h,{hint:""!==this.props.inputSongName?this.props.inputSongName:"NO SONG INPUTTED",className:"whiteText",label:"Your Song Guess "+this.props.songSimilarity+"% similar",labelId:"artist",icon:"music",disabled:!0,containerClass:"text-left"}),n.a.createElement(u.h,{hint:""!==this.props.inputArtistName?this.props.inputArtistName:"NO ARTIST INPUTTED",className:"whiteText",label:"Your Artist Guess "+this.props.artistSimilarity+"% similar",labelId:"artist",icon:"user",disabled:!0,containerClass:"text-left"})),n.a.createElement("button",{onClick:this.props.toggleFlip,className:"buttonClass"},"Back"))}}]),a}(i.Component)),k=a(63),E=a(137),O=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={songName:"",artistName:""},i.handleChange=i.handleChange.bind(Object(h.a)(i)),i.handleSubmit=i.handleSubmit.bind(Object(h.a)(i)),i}return Object(g.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.name,e.target.value)),console.log(e.target.name+" "+e.target.value)}},{key:"handleSubmit",value:function(e){this.props.toggleFlip(),this.props.setUserInput(this.state.songName,this.state.artistName)}},{key:"render",value:function(){return n.a.createElement(u.c,{className:"front"},n.a.createElement(u.e,{className:"img-fluid",src:this.props.item.album.images[0].url,waves:!0}),n.a.createElement(E.a,{variant:"determinate",value:100*this.props.progress_ms/this.props.item.duration_ms}),n.a.createElement(u.d,null,n.a.createElement(u.h,{name:"songName",value:this.state.songName,onChange:this.handleChange,className:"whiteText",label:"Guess the song!"}),n.a.createElement(u.h,{name:"artistName",value:this.state.artistName,onChange:this.handleChange,className:"whiteText",label:"Guess the artist!"}),n.a.createElement("button",{onClick:this.handleSubmit,className:"buttonClass"},"Check")))}}]),a}(i.Component),j=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={flipped:!1,songName:"",artistName:"",songSimilarity:0,artistSimilarity:0},i.toggleFlip=i.toggleFlip.bind(Object(h.a)(i)),i.setUserInput=i.setUserInput.bind(Object(h.a)(i)),i}return Object(g.a)(a,[{key:"toggleFlip",value:function(){console.log("flip"),this.setState({flipped:!this.state.flipped})}},{key:"setUserInput",value:function(e,t){this.setState({songName:e,artistName:t,songSimilarity:this.calculateSimilar(this.props.item.name,e),artistSimilarity:this.calculateSimilar(this.props.item.album.artists[0].name,t)})}},{key:"countLetters",value:function(e){var t,a={},i=Object(v.a)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;a[n]=(a[n]||0)+1}}catch(s){i.e(s)}finally{i.f()}return a}},{key:"calculateSimilar",value:function(e,t){if(console.log("Inside clacualte similar"),void 0===e||void 0===t)return 0;var a=0,i=0;console.log("actual is "+e),console.log("input is "+t);var n=this.countLetters(e.toLowerCase()),s=this.countLetters(t.toLowerCase());console.log("dict is + "+e+" "+JSON.stringify(n)),console.log("inputDict is "+t+" "+JSON.stringify(s));for(var r=0,o=Object.entries(n);r<o.length;r++){var c=Object(l.a)(o[r],2),u=c[0],m=c[1];i+=u in s?Math.abs(m-s[u]):m,a+=m}return Math.round((a-i)/a*100)}},{key:"render",value:function(){return n.a.createElement(u.f,{style:{display:"flex",alignItems:"center",justifyContent:"center"}},n.a.createElement("div",{className:"card-container"+(this.state.flipped?" flipped":"")},n.a.createElement(O,{toggleFlip:this.toggleFlip,setUserInput:this.setUserInput,item:this.props.item,progress_ms:this.props.progress_ms}),n.a.createElement(S,{toggleFlip:this.toggleFlip,inputSongName:this.state.songName,inputArtistName:this.state.artistName,songName:this.props.item.name,artistName:this.props.item.album.artists[0].name,songSimilarity:this.state.songSimilarity,artistSimilarity:this.state.artistSimilarity})))}}]),a}(i.Component),C=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={token:null,item:null,is_playing:!1,progress_ms:0},e.getCurrentlyPlaying=e.getCurrentlyPlaying.bind(Object(h.a)(e)),e.getSpotifyAPI=e.getSpotifyAPI.bind(Object(h.a)(e)),e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.getCurrentlyPlaying(e.props.token)}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.getCurrentlyPlaying)}}]),Object(g.a)(a,[{key:"getSpotifyAPI",value:function(e){return b.a.create({baseURL:"https://api.spotify.com",headers:{Authorization:"Bearer "+e}})}},{key:"getCurrentlyPlaying",value:function(){var e=this;this.getSpotifyAPI(this.props.token).get("/v1/me/player/currently-playing").then((function(t){200===t.status?e.setState({item:t.data.item,is_playing:t.data.is_playing,progress_ms:t.data.progress_ms}):e.setState({item:null,is_playing:!1,progress_ms:0})})).catch((function(e){console.error(e.response)}))}},{key:"render",value:function(){return this.state.item?n.a.createElement(j,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.state.progress_ms}):n.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"7rem"}},"Please play a song on Spotify")}}]),a}(n.a.Component),I=(a(121),function(){var e=Object(i.useState)(),t=Object(l.a)(e,2),a=t[0],s=t[1],r=c.a.get("spotifyAuthToken");Object(i.useEffect)((function(){s(c.a.get("spotifyAuthToken"))}),[r]);return n.a.createElement("div",null,n.a.createElement("div",{className:"spotifyHeading"},n.a.createElement("h1",null,"Spotify Guesser")),c.a.get("spotifyAuthToken")?n.a.createElement("div",null,n.a.createElement(C,{token:a})):n.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"10rem"}},n.a.createElement(m.b,{redirectUri:"https://louiskueh.com/artist-guesser-spotify/callback",clientID:"3770ed0bc8aa4ae6ba4dd47dec8b5fcd",scopes:[m.a.userReadCurrentlyPlaying]})),c.a.get("spotifyAuthToken")?n.a.createElement("div",{className:"logout"},n.a.createElement(u.b,{gradient:"aqua",onClick:function(){c.a.remove("spotifyAuthToken",{path:""}),window.location="/"}},"Logout")):"")});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,a){},69:function(e,t,a){e.exports=a(122)},74:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.f20abfe1.chunk.js.map